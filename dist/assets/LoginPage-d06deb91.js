import{r as s,j as e,u as q,a as I,s as P,b as M}from"./index-3bd4c93c.js";const A=({handleModal:n})=>{const[i,c]=s.useState(""),[d,m]=s.useState(""),[g,p]=s.useState(""),[o,x]=s.useState(""),[l,u]=s.useState(""),[f,b]=s.useState(""),[y,r]=s.useState(null),a=t=>{c(t.target.value)},N=t=>{m(t.target.value)},S=t=>{p(t.target.value)},j=t=>{x(t.target.value)},v=t=>{u(t.target.value)},w=t=>{b(t.target.value)},E=t=>{t.target===t.currentTarget&&n()},C=t=>{t.key==="Enter"&&n()},k=async t=>{t.preventDefault();try{const h=await fetch("/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:i,firstName:d,lastName:g,address:o,username:l,password:f})});h.ok?(c(""),m(""),p(""),x(""),u(""),b(""),n()):h.status===401?(alert("username already exists, please select another"),u("")):h.status===400&&alert("all fields required")}catch(h){console.error(h),r("An error occurred while attempting to sign up")}};return e.jsxs("div",{className:"position-fixed fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-opacity-90 bg-gradient-to-br from-blue-200 via-blue-500 to-blue-700",onClick:E,onKeyDown:C,role:"button",tabIndex:0,children:[y&&e.jsxs("div",{className:"error-message",children:[y,e.jsx("button",{className:"close-button",onClick:()=>r(null),children:"Dismiss Error"})]}),e.jsxs("form",{className:"signup-form",onSubmit:k,"data-testid":"signup-form",children:[e.jsx("input",{type:"text",required:!0,className:"search-input",name:"email",placeholder:"Enter your email",value:i,onChange:a}),e.jsx("input",{type:"text",required:!0,className:"search-input",name:"firstName",placeholder:"Enter your first name",value:d,onChange:N}),e.jsx("input",{type:"text",required:!0,className:"search-input",name:"lastName",placeholder:"Enter your last name",value:g,onChange:S}),e.jsx("input",{type:"text",required:!0,className:"search-input",name:"address",placeholder:"Enter your address",value:o,onChange:j}),e.jsx("input",{type:"text",required:!0,className:"search-input",name:"username",placeholder:"Enter a username",value:l,onChange:v}),e.jsx("input",{type:"password",required:!0,className:"search-input",name:"password",placeholder:"Enter a password",value:f,onChange:w}),e.jsx("button",{className:"button-theme",type:"submit",children:"Submit"}),e.jsx("button",{className:"button-theme",type:"button",onClick:()=>n(),children:"Cancel"})]})]})},T=()=>{const[n,i]=s.useState(""),[c,d]=s.useState(""),[m,g]=s.useState(!1),[p,o]=s.useState(null),x=q(),l=I();s.useEffect(()=>{(async()=>{try{const N=await(await fetch("/workout/images")).json();l(P(N))}catch(a){console.error(a),o("An error occured fetching images")}})()},[l]);const u=()=>{g(!m)},f=r=>{i(r.target.value)},b=r=>{d(r.target.value)},y=async r=>{r.preventDefault();try{const a=await fetch("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:n,password:c})});if(i(""),d(""),a.ok){const S=(await a.json()).user_id;l(M(n)),x(`/home/${S}`)}else a.status===401?alert("Invalid username or password"):a.status===400&&alert("both fields required")}catch(a){console.error(a),o("An error occured while attempting to log in")}};return e.jsxs("div",{className:"flex h-screen flex-col items-center justify-center  bg-gradient-to-br from-blue-200 via-blue-500 to-blue-700",children:[e.jsxs("div",{className:"mb-10 rounded-md bg-white p-4 text-center shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-semibold text-blue-800",children:"Welcome to Workout Tracker!"}),p&&e.jsxs("div",{className:"error-message",children:[p,e.jsx("button",{className:"close-button",onClick:()=>o(null),children:"Dismiss Error"})]}),e.jsxs("form",{className:"mb-5 mt-3 flex flex-col items-center justify-center rounded-lg bg-slate-400 px-3 py-10",onSubmit:y,children:[e.jsx("input",{className:"search-input",type:"text",required:!0,name:"username",placeholder:"Enter your username",value:n,onChange:f}),e.jsx("input",{className:"search-input",type:"password",required:!0,name:"password",placeholder:"Enter your password",value:c,onChange:b}),e.jsx("button",{className:"button-theme",type:"submit",children:"Login"})]}),e.jsx("button",{className:"button-theme",onClick:u,"data-testid":"signup-button",children:"Signup"})]}),m&&e.jsx(A,{handleModal:u})]})};export{T as default};
//# sourceMappingURL=LoginPage-d06deb91.js.map
