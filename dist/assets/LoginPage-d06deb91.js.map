{"version":3,"file":"LoginPage-d06deb91.js","sources":["../../src/components/SignupModal.tsx","../../src/pages/LoginPage.tsx"],"sourcesContent":["import { ChangeEvent, FormEvent, MouseEvent, useState } from \"react\";\nimport { SignupModalProps } from \"../frontendTypes\";\n\nexport const SignupModal = ({ handleModal }: SignupModalProps) => {\n  const [email, setEmail] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  const handleSetEmail = (e: ChangeEvent<HTMLInputElement>): void => {\n    setEmail(e.target.value);\n  };\n  const handleSetFirstName = (e: ChangeEvent<HTMLInputElement>): void => {\n    setFirstName(e.target.value);\n  };\n  const handleSetLastName = (e: ChangeEvent<HTMLInputElement>): void => {\n    setLastName(e.target.value);\n  };\n  const handleSetAddress = (e: ChangeEvent<HTMLInputElement>): void => {\n    setAddress(e.target.value);\n  };\n  const handleSetUsername = (e: ChangeEvent<HTMLInputElement>): void => {\n    setUsername(e.target.value);\n  };\n  const handleSetPassword = (e: ChangeEvent<HTMLInputElement>): void => {\n    setPassword(e.target.value);\n  };\n\n  const handleModalClick = (e: MouseEvent<HTMLDivElement>): void => {\n    if (e.target === e.currentTarget) {\n      handleModal();\n    }\n  };\n  const handleModalKeyPress = (\n    e: React.KeyboardEvent<HTMLDivElement>,\n  ): void => {\n    if (e.key === \"Enter\") {\n      handleModal();\n    }\n  };\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await fetch(\"/user/signup\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          email: email,\n          firstName: firstName,\n          lastName: lastName,\n          address: address,\n          username: username,\n          password: password,\n        }),\n      });\n      if (response.ok) {\n        setEmail(\"\");\n        setFirstName(\"\");\n        setLastName(\"\");\n        setAddress(\"\");\n        setUsername(\"\");\n        setPassword(\"\");\n        handleModal();\n      } else if (response.status === 401) {\n        alert(\"username already exists, please select another\");\n        setUsername(\"\");\n      } else if (response.status === 400) {\n        alert(\"all fields required\");\n      }\n    } catch (err) {\n      console.error(err);\n      setErrorMessage(\"An error occurred while attempting to sign up\");\n    }\n  };\n\n  return (\n    <div\n      className=\"position-fixed fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-opacity-90 bg-gradient-to-br from-blue-200 via-blue-500 to-blue-700\"\n      onClick={handleModalClick}\n      onKeyDown={handleModalKeyPress}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {errorMessage && (\n        <div className=\"error-message\">\n          {errorMessage}\n          <button\n            className=\"close-button\"\n            onClick={() => setErrorMessage(null)}\n          >\n            Dismiss Error\n          </button>\n        </div>\n      )}\n      <form\n        className=\"signup-form\"\n        onSubmit={handleSubmit}\n        data-testid=\"signup-form\"\n      >\n        <input\n          type=\"text\"\n          required\n          className=\"search-input\"\n          name=\"email\"\n          placeholder=\"Enter your email\"\n          value={email}\n          onChange={handleSetEmail}\n        />\n        <input\n          type=\"text\"\n          required\n          className=\"search-input\"\n          name=\"firstName\"\n          placeholder=\"Enter your first name\"\n          value={firstName}\n          onChange={handleSetFirstName}\n        />\n        <input\n          type=\"text\"\n          required\n          className=\"search-input\"\n          name=\"lastName\"\n          placeholder=\"Enter your last name\"\n          value={lastName}\n          onChange={handleSetLastName}\n        />\n        <input\n          type=\"text\"\n          required\n          className=\"search-input\"\n          name=\"address\"\n          placeholder=\"Enter your address\"\n          value={address}\n          onChange={handleSetAddress}\n        />\n        <input\n          type=\"text\"\n          required\n          className=\"search-input\"\n          name=\"username\"\n          placeholder=\"Enter a username\"\n          value={username}\n          onChange={handleSetUsername}\n        />\n        <input\n          type=\"password\"\n          required\n          className=\"search-input\"\n          name=\"password\"\n          placeholder=\"Enter a password\"\n          value={password}\n          onChange={handleSetPassword}\n        />\n        <button className=\"button-theme\" type=\"submit\">\n          Submit\n        </button>\n        <button\n          className=\"button-theme\"\n          type=\"button\"\n          onClick={() => handleModal()}\n        >\n          Cancel\n        </button>\n      </form>\n    </div>\n  );\n};\n","import { ChangeEvent, FormEvent, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { userLogin } from \"../slices/usersSlice\";\nimport { SignupModal } from \"../components/SignupModal\";\nimport { useAppDispatch } from \"../hooks\";\nimport { ImagesState, ReturnedUserId } from \"../frontendTypes\";\nimport { setImages } from \"../slices/workoutsSlice\";\n\nconst LoginPage = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showSignupModal, setShowSignupModal] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    const getWorkoutImages = async () => {\n      try {\n        const result = await fetch(\"/workout/images\");\n        const images = (await result.json()) as ImagesState;\n\n        dispatch(setImages(images));\n      } catch (err) {\n        console.error(err);\n        setErrorMessage(\"An error occured fetching images\");\n      }\n    };\n    void getWorkoutImages();\n  }, [dispatch]);\n\n  const handleModal = (): void => {\n    setShowSignupModal(!showSignupModal);\n  };\n\n  const handleSetUsername = (e: ChangeEvent<HTMLInputElement>): void => {\n    setUsername(e.target.value);\n  };\n  const handleSetPassword = (e: ChangeEvent<HTMLInputElement>): void => {\n    setPassword(e.target.value);\n  };\n\n  const handleSubmit = async (e: FormEvent): Promise<void> => {\n    e.preventDefault();\n    try {\n      const response = await fetch(\"/user/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          username: username,\n          password: password,\n        }),\n      });\n      setUsername(\"\");\n      setPassword(\"\");\n      if (response.ok) {\n        const returnedUserId = (await response.json()) as ReturnedUserId;\n        const returnedId = returnedUserId.user_id;\n        dispatch(userLogin(username));\n        navigate(`/home/${returnedId}`);\n      } else if (response.status === 401) {\n        alert(\"Invalid username or password\");\n      } else if (response.status === 400) {\n        alert(\"both fields required\");\n      }\n    } catch (err) {\n      console.error(err);\n      setErrorMessage(\"An error occured while attempting to log in\");\n    }\n  };\n  return (\n    <div className=\"flex h-screen flex-col items-center justify-center  bg-gradient-to-br from-blue-200 via-blue-500 to-blue-700\">\n      <div className=\"mb-10 rounded-md bg-white p-4 text-center shadow-lg\">\n        <h1 className=\"text-3xl font-semibold text-blue-800\">\n          Welcome to Workout Tracker!\n        </h1>\n        {errorMessage && (\n          <div className=\"error-message\">\n            {errorMessage}\n            <button\n              className=\"close-button\"\n              onClick={() => setErrorMessage(null)}\n            >\n              Dismiss Error\n            </button>\n          </div>\n        )}\n        <form\n          className=\"mb-5 mt-3 flex flex-col items-center justify-center rounded-lg bg-slate-400 px-3 py-10\"\n          onSubmit={handleSubmit}\n        >\n          <input\n            className=\"search-input\"\n            type=\"text\"\n            required\n            name=\"username\"\n            placeholder=\"Enter your username\"\n            value={username}\n            onChange={handleSetUsername}\n          />\n          <input\n            className=\"search-input\"\n            type=\"password\"\n            required\n            name=\"password\"\n            placeholder=\"Enter your password\"\n            value={password}\n            onChange={handleSetPassword}\n          />\n          <button className=\"button-theme\" type=\"submit\">\n            Login\n          </button>\n        </form>\n        <button\n          className=\"button-theme\"\n          onClick={handleModal}\n          data-testid=\"signup-button\"\n        >\n          Signup\n        </button>\n      </div>\n      {showSignupModal && <SignupModal handleModal={handleModal} />}\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"names":["SignupModal","handleModal","email","setEmail","useState","firstName","setFirstName","lastName","setLastName","address","setAddress","username","setUsername","password","setPassword","errorMessage","setErrorMessage","handleSetEmail","e","handleSetFirstName","handleSetLastName","handleSetAddress","handleSetUsername","handleSetPassword","handleModalClick","handleModalKeyPress","handleSubmit","response","err","jsxs","jsx","LoginPage","showSignupModal","setShowSignupModal","navigate","useNavigate","dispatch","useAppDispatch","useEffect","images","setImages","returnedId","userLogin"],"mappings":"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"}