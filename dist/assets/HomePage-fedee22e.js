import{r as o,j as e,c as W,d as S,a as C,e as T,f as M}from"./index-3bd4c93c.js";const E=({userId:c,handleWorkoutModal:s})=>{const[r,t]=o.useState(""),[f,u]=o.useState("Back"),[x,d]=o.useState(""),[b,h]=o.useState(""),[m,g]=o.useTransition(),[p,j]=o.useState(null),k=async i=>{i.preventDefault();try{(await fetch("/workout/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c,workoutName:r,muscleTarget:f,weight:x,reps:b})})).ok?(t(""),u(""),d(""),h(""),g(()=>{s()})):alert("invalid input")}catch(w){console.error(w),j("An error occuring while attempting to add new workout")}},v=i=>{i.target===i.currentTarget&&s()},N=i=>{i.key==="Enter"&&s()},y=i=>t(i.target.value),l=i=>u(i.target.value),n=i=>d(i.target.value),a=i=>h(i.target.value);return e.jsxs("div",{className:"position-fixed fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-opacity-90 bg-gradient-to-br from-slate-200 via-slate-500 to-slate-700 opacity-90",id:"modal-container",onClick:v,onKeyDown:N,role:"button",tabIndex:0,children:[p&&e.jsxs("div",{className:"error-message",children:[p,e.jsx("button",{className:"close-button",onClick:()=>j(null),children:"Dismiss Error"})]}),e.jsxs("form",{id:"addWorkoutForm",onSubmit:k,"data-testid":"addWorkoutForm",children:[e.jsx("input",{type:"text",className:"search-input",name:"workoutname",required:!0,placeholder:"Workout Name",value:r,onChange:y}),e.jsxs("select",{className:"search-input",name:"muscletarget",required:!0,placeholder:"Muscle Target",value:f,onChange:l,children:[e.jsx("option",{value:"'",disabled:!0,children:"Muscle Target"}),e.jsx("option",{value:"Back",children:"Back"}),e.jsx("option",{value:"Shoulders",children:"Shoulders"}),e.jsx("option",{value:"Legs",children:"Legs"}),e.jsx("option",{value:"Chest",children:"Chest"}),e.jsx("option",{value:"Abs",children:"Abs"}),e.jsx("option",{value:"Biceps",children:"Biceps"}),e.jsx("option",{value:"Triceps",children:"Triceps"})]}),e.jsx("input",{className:"search-input",type:"text",name:"weight",required:!0,placeholder:"Weight",value:x,onChange:n}),e.jsx("input",{className:"search-input",type:"text",name:"reps",required:!0,placeholder:"Reps",value:b,onChange:a}),m?e.jsx("div",{className:"mini loading-pane",children:e.jsx("h2",{className:"loader",children:"ðŸ’ª"})}):e.jsxs("div",{children:[e.jsx("button",{className:"button-theme",type:"submit",children:"Submit"}),e.jsx("button",{className:"button-theme",type:"button",onClick:()=>s(),children:"Cancel"})]})]})]})},A=({workoutId:c,handleEditModal:s})=>{const[r,t]=o.useState(""),[f,u]=o.useState(""),[x,d]=o.useState(""),[b,h]=o.useState(""),[m,g]=o.useState(null),p=W(a=>a.workouts.workouts);o.useEffect(()=>{if(p){const a=p.find(i=>i.workout_id===c);a&&(t(a.workoutname),u(a.muscletarget),d(a.weight),h(a.reps))}},[c,p]);const j=async a=>{a.preventDefault();try{(await fetch("/workout/edit",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({workout_id:c,workoutName:r,muscleTarget:f,weight:x,reps:b})})).ok?(t(""),u(""),d(""),h(""),s(null)):alert("invalid input")}catch(i){console.error(i),g("And error occurred while attempting to edit workout")}},k=a=>t(a.target.value),v=a=>u(a.target.value),N=a=>d(a.target.value),y=a=>h(a.target.value),l=a=>{a.target===a.currentTarget&&s(null)},n=a=>{a.key==="Enter"&&s(null)};return e.jsxs("div",{id:"modal-container",onClick:l,onKeyDown:n,role:"button",tabIndex:0,children:[m&&e.jsxs("div",{className:"error-message",children:[m,e.jsx("button",{className:"close-button",onClick:()=>g(null),children:"Dismiss Error"})]}),e.jsxs("form",{className:"mt-4 flex flex-col items-center justify-center",onSubmit:j,"data-testid":"editModalForm",children:[e.jsx("input",{className:"search-input",type:"text",name:"workoutname",required:!0,placeholder:"Workout Name",value:r,onChange:k}),e.jsxs("select",{className:"search-input",name:"muscletarget",required:!0,placeholder:"Muscle Target",value:f,onChange:v,children:[e.jsx("option",{value:"'",disabled:!0,children:"Muscle Target"}),e.jsx("option",{value:"Back",children:"Back"}),e.jsx("option",{value:"Shoulders",children:"Shoulders"}),e.jsx("option",{value:"Legs",children:"Legs"}),e.jsx("option",{value:"Chest",children:"Chest"}),e.jsx("option",{value:"Abs",children:"Abs"}),e.jsx("option",{value:"Biceps",children:"Biceps"}),e.jsx("option",{value:"Triceps",children:"Triceps"})]}),e.jsx("input",{className:"search-input",type:"text",name:"weight",required:!0,placeholder:"Weight",value:x,onChange:N}),e.jsx("input",{className:"search-input",type:"text",name:"reps",required:!0,placeholder:"Reps",value:b,onChange:y}),e.jsx("button",{className:"button-theme",type:"submit",children:"Submit"}),e.jsx("button",{className:"button-theme",type:"button",onClick:()=>s(null),children:"Cancel"})]})]})},D=(c,s)=>{let r;const t=c.replace(/[^a-zA-Z]/g,"").toLowerCase();return t==="situps"?r=s.images.results[0].image:t==="closegripbenchpress"?r=s.images.results[3].image:t==="bicepcurlpulley"?r=s.images.results[4].image:t==="bicepcurldumbbells"?r=s.images.results[128].image:t==="bicepcurlbarbell"?r=s.images.results[6].image:t==="benchdips"?r=s.images.results[7].image:t==="dumbbellshrugs"?r=s.images.results[8].image:t==="barbellshrugs"?r=s.images.results[9].image:t==="hammercurls"?r=s.images.results[10].image:t==="pushups"?r=s.images.results[12].image:t==="skullcrushers"?r=s.images.results[13].image:t==="benchpress"?r=s.images.results[15].image:t==="pullups"?r=s.images.results[16].image:t==="dumbbellbenchpress"?r=s.images.results[25].image:t==="declinebenchpress"?r=s.images.results[26].image:t==="cableflys"?r=s.images.results[30].image:t==="leglifts"?r=s.images.results[33].image:t==="squats"?r=s.images.results[38].image:t==="dumbbellshoulderpress"?r=s.images.results[40].image:t==="dips"?r=s.images.results[46].image:t==="dumbbellflys"?r=s.images.results[47].image:t==="squatstwo"?r=s.images.results[52].image:t==="frontdeltraises"?r=s.images.results[74].image:t==="pushupstwo"?r=s.images.results[81].image:t==="triceppulldown"?r=s.images.results[86].image:t==="lunges"?r=s.images.results[106].image:t==="legpress"?r=s.images.results[107].image:t==="dumbbellbenchpresstwo"?r=s.images.results[92].image:t==="calfraises"?r=s.images.results[104].image:t==="dumbbellrow"?r=s.images.results[132].image:t==="deadlifts"?r=s.images.results[35].image:r=s.images.results[22].image,r},B=()=>{const{userId:c}=S(),[s,r]=o.useState([]),[t,f]=o.useState(!1),[u,x]=o.useState(null),[d,b]=o.useState(!1),[h,m]=o.useState(null),g=C(),p=W(l=>l.workouts.images);o.useEffect(()=>{(async()=>{try{if(c){const n=await fetch(`/workout/${c}`);if(n.status===204)return;const a=await n.json();g(T(a))}}catch(n){console.error(n),m("An error occurred while fetching user workouts.")}})()},[g,u,c,t,d]),o.useEffect(()=>{(async()=>{try{if(c){const n=await fetch(`/workout/${c}`);if(n.status===204)return;const a=await n.json();r(a)}}catch(n){console.error(n),m("An error occurred while fetching user workouts.")}})()},[g,u,c,t,d]);const j=async()=>{try{(await fetch("/user/logout",{credentials:"include"})).ok?g(M()):alert("unable to logout")}catch(l){console.error(l),m("An error occurred while logging out.")}},k=()=>f(!t),v=l=>{x(n=>n===l?null:l)},N=async l=>{try{(await fetch(`/workout/remove/${l}`,{method:"DELETE"})).ok&&(alert("Workout Deleted!"),b(!d))}catch(n){console.error(n)}},y=l=>D(l,p);return e.jsxs("div",{className:" flex h-screen flex-col justify-start",children:[h&&e.jsxs("div",{className:"error-message",children:[h,e.jsx("button",{className:"close-button",onClick:()=>m(null),children:"Dismiss Error"})]}),e.jsxs("div",{className:"flex items-center  justify-around bg-slate-500",children:[t&&e.jsx(E,{userId:c,handleWorkoutModal:k}),e.jsx("button",{className:"button-theme",onClick:k,"data-testid":"add-workout-button",children:"Add Workout"}),e.jsx("button",{className:"button-theme",onClick:j,children:"Logout"})]}),e.jsx("div",{className:"grid h-screen grid-cols-1 gap-1 overflow-y-auto sm:grid-cols-2 lg:grid-cols-4",children:s&&s.length>0?s.map(l=>e.jsxs("div",{className:" m-14 ",children:[e.jsxs("ul",{className:"flex flex-col items-center justify-center rounded-xl bg-white text-blue-700 shadow-lg",children:[e.jsx("li",{className:"workout-desc",children:l.workoutname}),e.jsxs("li",{className:"workout-desc",children:["Muscle Target - ",l.muscletarget]}),e.jsxs("li",{className:"workout-desc",children:["Weight - ",l.weight]}),e.jsxs("li",{className:"workout-desc",children:["Reps - ",l.reps]}),e.jsx("img",{className:"min-w-1/3 min-h-1/3 h-1/3 w-1/3 bg-transparent",src:y(l.workoutname),alt:"Workout"})]}),u===l.workout_id&&e.jsx(A,{workoutId:l.workout_id,handleEditModal:()=>v(l.workout_id)}),e.jsxs("div",{className:" mt-2 flex justify-center",children:[e.jsx("button",{className:"button-theme",onClick:()=>v(l.workout_id),children:"Edit Workout"}),e.jsx("button",{className:"button-theme",onClick:()=>N(l.workout_id),children:"Delete Workout"})]})]},l.workout_id)):e.jsx("div",{"data-testid":"no-workouts",children:"No workouts added yet."})})]})};export{B as default};
//# sourceMappingURL=HomePage-fedee22e.js.map
